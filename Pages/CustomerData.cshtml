@page
@model CustomerDataModel
@{
    ViewData["Title"] = "Home page";
}

<!-- Content Wrapper. Contains page content -->
<!-- Begin Page Content -->
<body class="hold-transition sidebar-mini">
    <div class="container-fluid">
        <div>
            <!-- Content Header (Page header) -->
            <nav class="navbar navbar-expand-sm  navbar-dark" style="background-color: #FBFBFD; ">
                <ul class="navbar-nav">

                    <li class="nav-item active">
                        <a class="nav-link" style="color:black">Customer Data</a>

                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item" id="validation">

                        <a class="btn btn-primary" data-toggle="modal" data-target="#exampleModal1" onclick="resetdata()">
                            <i class="fas fa-pencil-alt">
                            </i>
                            Add Customer
                        </a>
                        <span id="savePR" hidden>Save</span>
                        <span id="companyname" hidden></span>
                        <span id="opningAmount" hidden></span>
                        <span id="opid" hidden></span>
                    </li>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                </ul>
            </nav>


            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <!-- /.card-header -->
                                <div class="card-body">

                                    <div class="modal fade" id="exampleModal1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-lg" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header" style="background-color:darkslategrey">
                                                    <span style="color:white">Add Customer Details</span>
                                                    <button style="color:white" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <input type="hidden" id="customerid" class="swal2-input">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="companynamelabel">Company Name</span>
                                                                <input tabIndex="1" onkeyup="this.value = this.value.toUpperCase();" type="text" id="CompanyName" class="form-control" placeholder="Company Name" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black">Contact Person</span>
                                                                <input tabIndex="2" onkeyup="this.value = this.value.toUpperCase();" id="CustomerName" class="form-control" placeholder="Contact Person" />
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="dealingPersonlabel">Dealing Person</span>
                                                                <input tabIndex="3" onkeyup="this.value = this.value.toUpperCase();" id="dealingPerson" class="form-control" placeholder="Dealing Person" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="emaillabel">E-mail</span>
                                                                <input tabIndex="4" type="email" id="Email" class="form-control" placeholder="example@gmail.com" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="phonelabel">Phone No.</span>
                                                                <input tabIndex="5" type="text" id="PhoneNo" class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black">PAN</span>
                                                                <input tabIndex="6" onkeyup="this.value = this.value.toUpperCase();" type="text" id="PAN" class="form-control" placeholder="Enter PAN No" />
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="gstlabel">G.S.T</span>
                                                                <input tabIndex="7" onkeyup="this.value = this.value.toUpperCase();" type="text" id="GST" class="form-control" placeholder="Enter GST" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="statelabel">State</span>

                                                                <select tabIndex="8" onchange="print_city('CITY', this.selectedIndex);" id="STATE" name="stt" class="form-control" required></select>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black" id="citylabel">City</span>
                                                                <select tabIndex="9" id="CITY" class="form-control" required></select>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <span style="color:black">Type</span>
                                                                <select tabIndex="10" id="type" class="form-control">
                                                                    <option value="Customer" selected>Customer</option>
                                                                    <option value="Supplier">Supplier</option>
                                                                    <option value="Customer/Supplier">Customer/Supplier</option>
                                                                    <option value="Contractor">Contractor</option>
                                                                    <option value="Transporter">Transporter</option>

                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <span style="color:black">Address 1</span>
                                                                <textarea tabIndex="11" onkeyup="this.value = this.value.toUpperCase();" style="height:100px" class="form-control" type="text" id="Address" placeholder="Enter Address"></textarea>
                                                            </div>
                                                        </div>


                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span style="color:black">Opening Balance</span>
                                                                <input class="form-control" type="text" placeholder="Enter Opening Balance" id="openingbalance" />
                                                            </div>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <div class="form-group">
                                                                <span style="color:black">CrDr</span>
                                                                <select class="form-control" id="crdr" style="width: 100%;">
                                                                    <option value="Cr">Cr</option>
                                                                    <option value="Dr">Dr</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span style="color:black">Date</span>
                                                                <input class="form-control" type="date" id="crdrdate" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="modal-footer">
                                                    <button onclick="OpeningSaleModel()" style="display:none" type="button" class="btn btn-primary" data-toggle="modal" data-target="#SaleModel" id="Salebalancebutton">Opening Balance Customer</button>
                                                    <button type="button" class="btn btn-primary" onclick="addcompany()" id="saveebutton">Save</button>
                                                    <button id="resetitem" type="button" class="btn btn-danger" onclick="resetdata()">Reset</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="modal fade" id="SaleModel" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-lg" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header" style="background-color:darkslategrey">
                                                    <span style="color:white">Bill-wise Breakup of:</span>&nbsp;&nbsp;&nbsp;
                                                    <span style="color:white" id="billwisecompanyname"></span> &nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span style="color:white">Upto :</span>&nbsp;&nbsp;&nbsp;
                                                    <span style="color:white" id="uptoAmount"></span>
                                                    <button style="color:white" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <input type="hidden" id="customerid" class="swal2-input">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span>Invoice No.:</span>
                                                                <input type="text" id="invoiceno" onkeydown="nextfocus(event,'datetime')" class="form-control">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span>Invoice Date  :</span>
                                                                <input type="date" id="datetime" class="form-control" onchange="Duedate()" onkeydown="nextfocus(event,'pono')" placeholder="Remarks" />
                                                            </div>
                                                        </div>

                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span style="color:black">P.O. No.</span>
                                                                <input id="pono" class="form-control" onkeydown="nextfocus(event,'podate')" placeholder="P.O. No." />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span>P.O. Date  :</span>
                                                                <input type="date" id="podate" onkeydown="nextfocus(event,'transportname')" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <div class="form-group">
                                                                <span style="color:black" id="companynamelabel">Transport Name</span>
                                                                <select class="form-control" id="transportname" onchange="nextfocus(event,'grno')" style="width: 100%;">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span style="color:black" id="Amount">G.R. No.</span>
                                                                <input type="text" id="grno" class="form-control" placeholder="G.R. Number" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span>Payment Term (Days):</span>
                                                                <div class="row">
                                                                    <input type="number" id="Pterm" onkeyup="Duedate()" onkeydown="nextfocus(event,'billAmount')" class="form-control" placeholder="Number" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span>Due Date  :</span>
                                                                <input type="date" id="duedate" disabled class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <span>Amount</span>
                                                                <input type="number" id="openingAmount" class="form-control" placeholder="Enter Amount" />
                                                            </div>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <span>CR/DR</span>
                                                            <select class="form-control" id="crdrType" style="width: 100%;">
                                                                <option value=""></option>
                                                                <option value="Cr">Cr</option>
                                                                <option value="Dr">Dr</option>
                                                            </select>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-primary" onclick="addOpeningBalance()" id="buttonid">Save</button>
                                                    <button id="resetitem" type="button" class="btn btn-danger" onclick="resetdata()">Reset</button>
                                                </div>
                                                <div>
                                                    <table id="opDatatable" class="table table-bordered table-hover" style="width:100%">
                                                        <thead>
                                                            <tr>
                                                                <th></th>
                                                                <th style="font-family: 'sans-serif'; font-weight: normal; ">Invoice No.</th>
                                                                <th style="font-family: 'sans-serif'; font-weight: normal; ">Date</th>
                                                                <th style="font-family: 'sans-serif'; font-weight: normal; ">Due Date</th>
                                                                <th style="font-family: 'sans-serif'; font-weight: normal; ">Amount</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                                <div style="height:30px;border-color:black"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <table id="companylistTable" class="table table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th style="font-family: 'sans-serif'; font-weight: normal;">Company Name</th>
                                                <th style="font-family: 'sans-serif'; font-weight: normal;">Contact Person</th>
                                                <th style="font-family: 'sans-serif'; font-weight: normal;">Dealing Person</th>
                                                <th style="font-family: 'sans-serif'; font-weight: normal;">CITY</th>
                                                <th style="font-family: 'sans-serif'; font-weight: normal;">STATE</th>
                                                <th style="font-family: 'sans-serif'; font-weight: normal;">Type</th>

                                                <th></th>
                                            </tr>
                                        </thead>
                                    </table>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </div>
    <link rel="stylesheet" href="../../plugins/select2/css/select2.min.css">
    @section Scripts{
        <script src="~/js/Additems.js"></script>
        <script src="../js/CustomerData.js"></script>
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <!-- DataTables  & Plugins -->
        <script src="../../plugins/datatables/jquery.dataTables.min.js"></script>
        <script src="../../plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
        <script src="../../plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
        <script src="../../plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
        <script src="../../plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
        <script src="../../plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
        <script src="../../plugins/jszip/jszip.min.js"></script>
        <script src="../../plugins/pdfmake/pdfmake.min.js"></script>
        <script src="../../plugins/pdfmake/vfs_fonts.js"></script>
        <script src="../../plugins/datatables-buttons/js/buttons.html5.min.js"></script>
        <script src="../../plugins/datatables-buttons/js/buttons.print.min.js"></script>
        <script src="../../plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
        <link href="https://nightly.datatables.net/css/jquery.dataTables.css" rel="stylesheet" type="text/css" />
        <script src="https://nightly.datatables.net/js/jquery.dataTables.js"></script>
        <script src="../plugins/select2/js/select2.full.min.js"></script>

        <script>
            document.title = "Parties";
        </script>

    }

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        $(document).on('keypress', 'input,select', function (e) {
            if (e.which == 13) {
                e.preventDefault();
                var $next = $('[tabIndex=' + (+this.tabIndex + 1) + ']');
                console.log($next.length);
                if (!$next.length) {
                    $next = $('[tabIndex=1]');
                }
                $next.focus().click();
            }
        });
    </script>


</body>

